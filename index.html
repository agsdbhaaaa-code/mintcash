<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MintCash</title>

<style>
:root{
  --green:#2dff88;
  --bg-dark:rgba(0,0,0,.6);
  --card:#0f1f1a;
}
*{box-sizing:border-box;font-family:Arial}
body{
  margin:0;min-height:100vh;
  background:
    linear-gradient(var(--bg-dark),var(--bg-dark)),
    url("https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEioGadxhmGRd2UJiH3Utj15KOcxGxPY3ZcTSRjIeElA6jt2PySe2h0NQ0lDpchkZsSqGDEf1EQ82nDcMkbUd3-Qw8zPa4TpLnEDOt3SegWkyjiJoCAqRa6E0HCpfJrVSdm9xL_hTubA86EFmebwZAdkIAKHYlMVrZ31okUr-16LYD_Dc81vs-_p7AGOeuQ/s1376/1766075604391.jpg")
    center/cover no-repeat;
  color:#fff;
}
header{display:flex;justify-content:space-between;align-items:center;padding:14px 16px}
.logo{display:flex;align-items:center;gap:10px}
.logo img{width:42px;height:42px;border-radius:50%}
.lang-btn{padding:8px 14px;border-radius:16px;border:1px solid rgba(255,255,255,.3);background:rgba(0,0,0,.3);color:#fff;cursor:pointer}
main{text-align:center;padding:80px 16px}
h1 span{color:var(--green)}
.actions{display:flex;gap:12px;justify-content:center;margin-top:28px}
.btn{padding:14px 26px;border-radius:18px;border:none;cursor:pointer;font-size:16px}
.btn.green{background:var(--green)}
.btn.dark{background:rgba(0,0,0,.4);color:#fff}
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.65);display:none;align-items:center;justify-content:center;z-index:100}
.modal{width:92%;max-width:420px;background:var(--card);border-radius:20px;padding:22px;position:relative}
.close{position:absolute;top:10px;left:14px;font-size:22px;cursor:pointer}
.modal h3{text-align:center;margin-bottom:18px}
.field{margin-bottom:12px}
.field input{width:100%;padding:14px;border-radius:14px;border:none;background:#1b2f28;color:#fff}
.submit{width:100%;padding:14px;border-radius:16px;background:var(--green);border:none;font-size:16px;cursor:pointer}
.divider{text-align:center;margin:14px 0;opacity:.7}
.google-btn{width:100%;height:54px;border-radius:18px;border:1px solid rgba(255,255,255,.25);background:rgba(255,255,255,.05);display:flex;align-items:center;justify-content:center;gap:12px;color:#fff;font-size:15px;cursor:pointer}
.google-btn img{width:22px}
</style>
</head>

<body>

<header>
  <div class="logo">
    <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhTrhu7Mi9p9krwFaOjjVmV_Yqi8PMNXcMpnJWQka-f3QpemAOY-8nK_QCzXBHFkQENTdNctzUxY61FK0Wi-uZh6hruvb2s_qZ7aTjluaNrYIzat6Y_0ODG_2F9s25ETtwDcBwyXqRz4HlG-4YIG6_mPXR8A6MzuwESeCpYMoqXEAjXG1Qm0vaveW7n9KI/s562/Screenshot_20251218_204032_Google.jpg">
    <strong>MintCash</strong>
  </div>
  <button class="lang-btn" onclick="toggleLang()">AR / EN</button>
</header>

<main>
  <h1 id="title"><span>اكسب المال</span> أثناء المتعة</h1>
  <p id="desc">جرّب التطبيقات والألعاب الآن!</p>
  <div class="actions">
    <button class="btn green" onclick="openAuth()">ابدأ الآن</button>
    <button class="btn dark" onclick="openAuth()">تسجيل الدخول</button>
  </div>
</main>

<div class="overlay" id="authBox">
  <div class="modal">
    <div class="close" onclick="closeAuth()">×</div>
    <h3 id="authTitle">إنشاء حساب / تسجيل دخول</h3>
    <div class="field"><input id="name" placeholder="الاسم"></div>
    <div class="field"><input id="email" placeholder="البريد الإلكتروني"></div>
    <div class="field"><input id="password" type="password" placeholder="كلمة المرور"></div>
    <button class="submit" onclick="emailLogin()">اشتراك</button>
    <div class="divider">أو</div>
    <button class="google-btn" onclick="googleLogin()">
      <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg">
      <span id="googleText">تسجيل الدخول باستخدام جوجل</span>
    </button>
  </div>
</div>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { getFirestore, doc, setDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAR1agEF6AHWHrgY4g_M3EoojdPKB1U9sY",
  authDomain: "mintcash-65c77.firebaseapp.com",
  projectId: "mintcash-65c77",
  storageBucket: "mintcash-65c77.appspot.com",
  messagingSenderId: "448741584532",
  appId: "1:448741584532:web:ccad1e2feabd4c8071ce81"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

window.emailLogin = async function(){
  const email = email.value;
  const password = password.value;
  const nameVal = name.value || "مستخدم";

  try{
    const res = await createUserWithEmailAndPassword(auth,email,password);
    await setDoc(doc(db,"users",res.user.uid),{
      name:nameVal,
      email,
      points:0,
      balance_mc:0,
      createdAt:serverTimestamp(),
      last_login:serverTimestamp()
    });
    alert("تم إنشاء الحساب بنجاح");
    closeAuth();
  }catch(e){
    if(e.code==="auth/email-already-in-use"){
      await signInWithEmailAndPassword(auth,email,password);
      alert("تم تسجيل الدخول");
      closeAuth();
    }else{
      alert(e.message);
    }
  }
}

window.googleLogin = async function(){
  const provider = new GoogleAuthProvider();
  const res = await signInWithPopup(auth,provider);
  await setDoc(doc(db,"users",res.user.uid),{
    name:res.user.displayName,
    email:res.user.email,
    points:0,
    balance_mc:0,
    createdAt:serverTimestamp(),
    last_login:serverTimestamp()
  },{merge:true});
  alert("تم تسجيل الدخول عبر جوجل");
  closeAuth();
}
</script>

<script>
let lang="ar";
function openAuth(){authBox.style.display="flex"}
function closeAuth(){authBox.style.display="none"}
function toggleLang(){
  if(lang==="ar"){
    document.documentElement.lang="en";
    document.documentElement.dir="ltr";
    title.innerHTML="<span>EARN MONEY</span> while having fun";
    desc.innerText="Test apps & games now!";
    authTitle.innerText="Create account / Sign in";
    googleText.innerText="Sign in with Google";
    lang="en";
  }else location.reload();
}
</script>

</body>
</html>